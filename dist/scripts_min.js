let currentPage=1,pokemonRepository=function(){let e=[];function t(t){e.push(t)}function n(){return e}let i=document.querySelector(".search-bar");function o(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),i=document.createElement("button");n.classList.add("list-group-item","col-sm-4","col-lg-2"),i.innerText=e.name,i.classList.add("btn","btn-primary","btn-block","capitalize-first-letter"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#exampleModal"),i.addEventListener("click",function(t){a(e)}),n.appendChild(i),t.appendChild(n)}function a(e){pokemonRepository.loadDetails(e).then(function(){var t;let n,i,o,a,r,l,s,c,d;console.log(e),t=e,n=document.querySelector(".modal-body"),(i=document.querySelector(".modal-title")).innerHTML="",n.innerHTML="",(o=document.createElement("h1")).textContent=t.name,o.classList.add("capitalize-first-letter"),(a=document.createElement("img")).classList.add("modal-img"),a.style.width="50%",a.src=t.imageUrlFront,(r=document.createElement("img")).classList.add("modal-img"),r.style.width="50%",r.src=t.imageUrlBack,(l=document.createElement("p")).textContent="Height : "+t.height,(s=document.createElement("p")).textContent="Weight : "+t.weight,(c=document.createElement("p")).textContent="Types : "+t.types.join(", "),(d=document.createElement("p")).textContent="Abilities : "+t.abilities.join(", "),i.appendChild(o),n.appendChild(a),n.appendChild(r),n.appendChild(l),n.appendChild(s),n.appendChild(c),n.appendChild(d)})}return i.addEventListener("input",t=>{let n=t.target.value.toLowerCase(),i=e.filter(e=>e.name.toLowerCase().includes(n));document.querySelector(".pokemon-list").innerHTML="",i.forEach(e=>{o(e)})}),{add:t,getAll:n,addListItem:o,loadList:function e(){return fetch(`https://pokeapi.co/api/v2/pokemon/?limit=15&offset=${(currentPage-1)*15}`).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:function e(t){return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrlFront=e.sprites.front_default,t.imageUrlBack=e.sprites.back_default,t.height=e.height,t.weight=e.weight,t.types=e.types.map(e=>e.type.name),t.abilities=e.abilities.map(e=>e.ability.name)}).catch(function(e){console.error(e)})},showDetails:a,loadListAndDisplay:function e(){return 1===currentPage&&(document.querySelector(".pokemon-list").innerHTML=""),pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})})}}}();pokemonRepository.loadListAndDisplay(),document.getElementById("loadMoreBtn").addEventListener("click",function(){currentPage++,console.log("Load More clicked, currentPage:",currentPage),pokemonRepository.loadList().then(function(){console.log("Fetched data for page:",currentPage),pokemonRepository.getAll().forEach(function(e){console.log("Adding:",e.name),pokemonRepository.addListItem(e)})})});